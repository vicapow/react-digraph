{"version":3,"sources":["../../../src/test/components/graph-view.js"],"names":["setUpDomEnvironment","JSDOM","jsdom","dom","window","global","document","navigator","userAgent","copyProps","src","target","props","Object","getOwnPropertyNames","filter","prop","map","getOwnPropertyDescriptor","defineProperties","adapter","Adapter","EmptyShape","SpecialShape","SpecialChildShape","EmptyEdgeShape","SpecialEdgeShape","config","NodeTypes","empty","typeText","shapeId","shape","special","NodeSubtypes","specialChild","EdgeTypes","emptyEdge","specialEdge","EMPTY_TYPE","SPECIAL_TYPE","SPECIAL_CHILD_SUBTYPE","EMPTY_EDGE_TYPE","SPECIAL_EDGE_TYPE","sample","getViewNode","id","nodes","node","mockProps","nodeKey","emptyType","edges","selected","nodeTypes","nodeSubtypes","edgeTypes","onSelectNode","onCreateNode","onUpdateNode","onDeleteNode","onSelectEdge","onCreateEdge","onSwapEdge","onDeleteEdge","tests","wrapper","t","equal","find","length","view","render","controls","end","module","exports"],"mappings":"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","file":"graph-view.js","sourcesContent":["// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nimport React from 'react';\n\nimport Adapter from 'enzyme-adapter-react-16';\nimport { configure, mount, render } from 'enzyme';\nimport jsdom from 'jsdom';\nimport test from 'tape';\nimport sinon from 'sinon';\n\nimport GraphView from '../../components/graph-view';\n\n\n//https://stackoverflow.com/questions/46896639/ensure-a-dom-environment-is-loaded-for-enzyme\nfunction setUpDomEnvironment() {\n  const { JSDOM } = jsdom;\n  const dom = new JSDOM('<!doctype html><html><body></body></html>');\n  const { window } = dom;\n\n  global.window = window;\n  global.document = window.document;\n  global.navigator = {\n    userAgent: 'node.js',\n  };\n  copyProps(window, global);\n}\n\nfunction copyProps(src, target) {\n  const props = Object.getOwnPropertyNames(src)\n    .filter(prop => typeof target[prop] === 'undefined')\n    .map(prop => Object.getOwnPropertyDescriptor(src, prop));\n  Object.defineProperties(target, props);\n}\n\nsetUpDomEnvironment();\n\nconfigure({ adapter: new Adapter() })\n\n\n\nconst EmptyShape = (\n  <symbol viewBox=\"0 0 100 100\" id=\"empty\" key=\"0\">\n    <circle cx=\"50\" cy=\"50\" r=\"45\"></circle>\n  </symbol>\n)\n\nconst SpecialShape = (\n  <symbol viewBox=\"0 0 100 100\" id=\"special\" key=\"1\">\n    <rect transform=\"translate(50) rotate(45)\" width=\"70\" height=\"70\"></rect>\n  </symbol>\n)\n\nconst SpecialChildShape = (\n  <symbol viewBox=\"0 0 100 100\" id=\"specialChild\" key=\"0\">\n    <rect x=\"2.5\" y=\"0\" width=\"95\" height=\"97.5\" fill=\"rgba(30, 144, 255, 0.12)\"></rect>\n  </symbol>\n)\n\nconst EmptyEdgeShape = (\n  <symbol viewBox=\"0 0 50 50\" id=\"emptyEdge\" key=\"0\">\n    <circle cx=\"25\" cy=\"25\" r=\"8\" fill=\"currentColor\"> </circle>\n  </symbol>\n)\n\nconst SpecialEdgeShape = (\n  <symbol viewBox=\"0 0 50 50\" id=\"specialEdge\" key=\"1\">\n    <rect transform=\"rotate(45)\"  x=\"25\" y=\"-4.5\" width=\"15\" height=\"15\" fill=\"currentColor\"></rect>\n  </symbol>\n)\n\nconst config = {\n  NodeTypes: {\n    empty: {\n      typeText: \"None\",\n      shapeId: \"#empty\",\n      shape: EmptyShape\n    },\n    special: {\n      typeText: \"Special\",\n      shapeId: \"#special\",\n      shape: SpecialShape\n    }\n  },\n  NodeSubtypes: {\n    specialChild: {\n      shapeId: \"#specialChild\",\n      shape: SpecialChildShape\n    }\n  },\n  EdgeTypes: {\n    emptyEdge: {\n      shapeId: \"#emptyEdge\",\n      shape: EmptyEdgeShape\n    },\n    specialEdge: {\n      shapeId: \"#specialEdge\",\n      shape: SpecialEdgeShape\n    }\n  }\n}\n\nconst EMPTY_TYPE = \"empty\"; // Empty node type\nconst SPECIAL_TYPE = \"special\";\nconst SPECIAL_CHILD_SUBTYPE = \"specialChild\";\nconst EMPTY_EDGE_TYPE = \"emptyEdge\";\nconst SPECIAL_EDGE_TYPE = \"specialEdge\";\n\nconst sample = {\n  \"nodes\": [\n    {\n      \"id\": 1,\n      \"title\": \"Node A\",\n      \"x\": 258.3976135253906,\n      \"y\": 331.9783248901367,\n      \"type\": SPECIAL_TYPE\n    },\n    {\n      \"id\": 2,\n      \"title\": \"Node B\",\n      \"x\": 593.9393920898438,\n      \"y\": 260.6060791015625,\n      \"type\": EMPTY_TYPE,\n      \"subtype\": SPECIAL_CHILD_SUBTYPE\n    },\n    {\n      \"id\": 3,\n      \"title\": \"Node C\",\n      \"x\": 237.5757598876953,\n      \"y\": 61.81818389892578,\n      \"type\": EMPTY_TYPE\n    },\n    {\n      \"id\": 4,\n      \"title\": \"Node C\",\n      \"x\": 600.5757598876953,\n      \"y\": 600.81818389892578,\n      \"type\": EMPTY_TYPE\n    }\n  ],\n  \"edges\": [\n    {\n      \"source\": 1,\n      \"target\": 2,\n      \"type\": SPECIAL_EDGE_TYPE\n    },\n    {\n      \"source\": 2,\n      \"target\": 4,\n      \"type\": EMPTY_EDGE_TYPE\n    }\n  ]\n}\n\nconst getViewNode = function(id){\n  return sample.nodes.filter(function(node){\n    return node.id === id\n  })[0]\n}\n\nconst mockProps = {\n  nodeKey: \"id\",\n  emptyType: EMPTY_TYPE,\n  nodes: sample.nodes,\n  edges: sample.edges,\n  selected: {},\n  nodeTypes: config.NodeTypes,\n  nodeSubtypes: config.NodeSubtypes,\n  edgeTypes: config.EdgeTypes,\n  getViewNode: getViewNode,\n  onSelectNode:()=>null,\n  onCreateNode: ()=>null,\n  onUpdateNode: ()=>null,\n  onDeleteNode: ()=>null,\n  onSelectEdge: ()=>null,\n  onCreateEdge: ()=>null,\n  onSwapEdge: ()=>null,\n  onDeleteEdge: ()=>null\n}\n\nconst tests = function(){\n\n  test('GraphView', t => {\n    const wrapper = mount(<GraphView {...mockProps}/>);\n    t.equal(wrapper.find('.viewWrapper').length, 1, 'Renders wrapper');\n\n    const view = wrapper.find('.view').render()\n    t.equal(view.find('.node').length, 4, 'Renders nodes');\n    t.equal(view.find('.edge').length, 2, 'Renders edges');\n\n    const controls = wrapper.find('.graphControls')\n    t.equal(controls.length, 1, 'Renders controls');\n\n    t.end();\n  });\n\n}\n\n\nmodule.exports = tests"]}